<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="做酷的东西, 成为伟大的工程师，写匪夷所思的代码，然后和每个人成为朋友．"><title>知识总结之 Material Design库常用控件总结 | 常兴 E 站</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">知识总结之 Material Design库常用控件总结</h1><a id="logo" href="/.">常兴 E 站</a><p class="description">Action Speak Louder Than Words.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/sitemap.xml"><i class="fa fa-rss"> sitemap</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">知识总结之 Material Design库常用控件总结</h1><div class="post-meta">Jun 29, 2017<span> | </span><span class="category"><a href="/categories/android/">android</a></span></div><div class="post-content"><p>Google从安卓5.0开始提出了Meterial Design设计，各种被模仿学习，开始有超越IOS的劲头。同时，谷歌官方还为安卓开发者提供了design库，可以很容易实现meterial设计华丽丽效果，公司项目很少能够直接用这些控件的，这几天业余时间学习下用在自己小项目中，这里整理一篇这些控件细节，为日后参考。</p>
<p><img src="http://wx4.sinaimg.cn/mw690/70e618a5ly1fh1whznzjnj20w80hcq3s.jpg" alt="Material Design"></p>
<a id="more"></a>
<h1 id="Material-Design库常用控件使用总结"><a href="#Material-Design库常用控件使用总结" class="headerlink" title="Material Design库常用控件使用总结"></a>Material Design库常用控件使用总结</h1><h2 id="一、CoordinatorLayout"><a href="#一、CoordinatorLayout" class="headerlink" title="一、CoordinatorLayout"></a>一、CoordinatorLayout</h2><p>CoordinatorLayout的主要功能一句话概括：作为顶层GroupView来调度或协调子布局。</p>
<p>官方解释：</p>
<blockquote>
<p>CoordinatorLayout is a super-powered FrameLayout.<br>CoordinatorLayout is intended for two primary use cases:<br>As a top-level application decor or chrome layout<br>As a container for a specific interaction with one or more child views</p>
</blockquote>
<p>主要搭配子布局有，AppBarLayout等App顶部位置的View，及Content位置的view，还有一些装饰性引导控件如FloatingAcitionButton， 可产生各种炫酷的效果。</p>
<p>CoordinatorLayout的强大主要原因是<strong>Behavior</strong>类，CoordinatorLayout自己并不控制View，所有的控制权都在Behavior。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CoordinatorLayout</span> <span class="keyword">extends</span> <span class="title">ViewGroup</span> <span class="title">implements</span> <span class="title">NestedScrollingParent</span></span></div></pre></td></tr></table></figure>
<p>看代码发现，CoordinatorLayout其实就是个自定义的ViewGroup，实现了一个<strong>NestedScrollingParent</strong>接口。NestedScrollingParent接口主要是解决联合滑动问题，也就是解决android系统事件传递中事件被一个控件开始处理，这个事件的后续事件将不会被其他控件收到的缺陷。<br>这里引用<a href="http://mobile.51cto.com/android-524405.htm" target="_blank" rel="external">网络上</a>的一张安卓事件传递图，个人认为比较齐全：</p>
<p><img src="dispatch.png" alt="事件传递"></p>
<h3 id="Behavior深入了解"><a href="#Behavior深入了解" class="headerlink" title="Behavior深入了解"></a>Behavior深入了解</h3><p>控件处了自己可以默认有自己的Behavior，还可以在xml中动态引用。</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">app:</span>layout_behavior=<span class="string">"xxx.Behavior"</span></div></pre></td></tr></table></figure>
<p>查代码看看CoordinatorLayout 什么时候用到了behavior。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">        public static <span class="class"><span class="keyword">class</span> <span class="title">LayoutParams</span> <span class="keyword">extends</span> <span class="title">ViewGroup</span>.<span class="title">MarginLayoutParams</span> </span>&#123;</div><div class="line">     		 <span class="comment">/**</span></div><div class="line">     	      * A &#123;@link Behavior&#125; that the child view should obey.</div><div class="line">      	 */</div><div class="line">      	<span class="type">Behavior</span> mBehavior;</div><div class="line"></div><div class="line">      	boolean mBehaviorResolved = <span class="literal">false</span>;</div><div class="line">      	......</div><div class="line">      &#125;</div><div class="line">      </div><div class="line"><span class="keyword">private</span> void prepareChildren() &#123;</div><div class="line">      	mDependencySortedChildren.clear();</div><div class="line">     		 mChildDag.clear();</div><div class="line"></div><div class="line">     		 <span class="keyword">for</span> (int i = <span class="number">0</span>, count = getChildCount(); i &lt; count; i++) &#123;</div><div class="line">          <span class="keyword">final</span> <span class="type">View</span> view = getChildAt(i);</div><div class="line"></div><div class="line">          <span class="keyword">final</span> <span class="type">LayoutParams</span> lp = getResolvedLayoutParams(view);</div><div class="line">          lp.findAnchorView(<span class="keyword">this</span>, view);</div><div class="line"></div><div class="line">          mChildDag.addNode(view);</div><div class="line"></div><div class="line">          <span class="comment">// Now iterate again over the other children, adding any dependencies to the graph</span></div><div class="line">          <span class="keyword">for</span> (int j = <span class="number">0</span>; j &lt; count; j++) &#123;</div><div class="line">              <span class="keyword">if</span> (j == i) &#123;</div><div class="line">                  <span class="keyword">continue</span>;</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">final</span> <span class="type">View</span> other = getChildAt(j);</div><div class="line">              <span class="keyword">final</span> <span class="type">LayoutParams</span> otherLp = getResolvedLayoutParams(other);</div><div class="line">              <span class="keyword">if</span> (otherLp.dependsOn(<span class="keyword">this</span>, other, view)) &#123;</div><div class="line">                  <span class="keyword">if</span> (!mChildDag.contains(other)) &#123;</div><div class="line">                      <span class="comment">// Make sure that the other node is added</span></div><div class="line">                      mChildDag.addNode(other);</div><div class="line">                  &#125;</div><div class="line">                  <span class="comment">// Now add the dependency to the graph</span></div><div class="line">                  mChildDag.addEdge(view, other);</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      <span class="type">LayoutParams</span> getResolvedLayoutParams(<span class="type">View</span> child) &#123;</div><div class="line">        <span class="keyword">final</span> <span class="type">LayoutParams</span> result = (<span class="type">LayoutParams</span>) child.getLayoutParams();</div><div class="line">        <span class="keyword">if</span> (!result.mBehaviorResolved) &#123;</div><div class="line">          <span class="type">Class</span>&lt;?&gt; childClass = child.getClass();</div><div class="line">          <span class="type">DefaultBehavior</span> defaultBehavior = <span class="literal">null</span>;</div><div class="line">          <span class="keyword">while</span> (childClass != <span class="literal">null</span> &amp;&amp;</div><div class="line">                  (defaultBehavior = childClass.getAnnotation(<span class="type">DefaultBehavior</span>.<span class="keyword">class</span>)) == <span class="literal">null</span>) &#123;</div><div class="line">              childClass = childClass.getSuperclass();</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (defaultBehavior != <span class="literal">null</span>) &#123;</div><div class="line">              <span class="keyword">try</span> &#123;</div><div class="line">                  result.setBehavior(defaultBehavior.value().newInstance());</div><div class="line">              &#125; <span class="keyword">catch</span> (<span class="type">Exception</span> e) &#123;</div><div class="line">                  <span class="type">Log</span>.e(<span class="type">TAG</span>, <span class="string">"Default behavior class "</span> + defaultBehavior.value().getName() +</div><div class="line">                          <span class="string">" could not be instantiated. Did you forget a default constructor?"</span>, e);</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">          result.mBehaviorResolved = <span class="literal">true</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> result;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>Behavior是CoordinatorLayout.LayoutParams的成员变量，那么也就是说只有当你的Behavior设置给CoordinatorLayout的直接子View才会有效果</p>
<p>依赖关系在<em>dependsOn（）</em>方法中建立联系。</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">        * Check<span class="built_in"> if </span>an associated child view depends on another child view of the CoordinatorLayout.</div><div class="line">        *</div><div class="line">        * @param parent the parent CoordinatorLayout</div><div class="line">        * @param child the child to<span class="built_in"> check</span></div><div class="line">        * @param dependency the proposed dependency to<span class="built_in"> check</span></div><div class="line">        * @return true<span class="built_in"> if </span>child depends on dependency</div><div class="line">        */</div><div class="line">       boolean dependsOn(CoordinatorLayout parent, View child, View dependency) &#123;</div><div class="line">          <span class="built_in"> return </span>dependency == mAnchorDirectChild</div><div class="line">                   || shouldDodge(dependency, ViewCompat.getLayoutDirection(parent))</div><div class="line">                   || (mBehavior != null &amp;&amp; mBehavior.layoutDependsOn(parent, child, dependency));</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<p>CoordinatorLayout与各个子View建立关系依赖链后，怎么实施控制的呢？ 下面具体分析下Behavior起了什么作用。看下部分源码如下：</p>
<figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Interaction behavior plugin for child views of &#123;<span class="doctag">@link</span> CoordinatorLayout&#125;.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;A Behavior implements one or more interactions that a user can take on a child view.</div><div class="line"> * These interactions may include drags, swipes, flings, or any other gestures.&lt;/p&gt;</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> &lt;V&gt; The View type that this Behavior operates on</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Behavior</span>&lt;<span class="title">V</span> <span class="keyword">extends</span> <span class="title">View</span>&gt; </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when the Behavior has been attached to a LayoutParams instance.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;This will be called after the LayoutParams has been instantiated and can be</div><div class="line">     * modified.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> params the LayoutParams instance that this Behavior has been attached to</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onAttachedToLayoutParams(@NonNull CoordinatorLayout.LayoutParams params) &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when the Behavior has been detached from its holding LayoutParams instance.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;This will only be called if the Behavior has been explicitly removed from the</div><div class="line">     * LayoutParams instance via &#123;<span class="doctag">@link</span> LayoutParams#setBehavior(Behavior)&#125;. It will not be</div><div class="line">     * called if the associated view is removed from the CoordinatorLayout or similar.&lt;/p&gt;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onDetachedFromLayoutParams() &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Respond to CoordinatorLayout touch events before they are dispatched to child views.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Behaviors can use this to monitor inbound touch events until one decides to</div><div class="line">     * intercept the rest of the event stream to take an action on its associated child view.</div><div class="line">     * This method will return false until it detects the proper intercept conditions, then</div><div class="line">     * return true once those conditions have occurred.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Once a Behavior intercepts touch events, the rest of the event stream will</div><div class="line">     * be sent to the &#123;<span class="doctag">@link</span> #onTouchEvent&#125; method.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;The default implementation of this method always returns false.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent the parent view currently receiving this touch event</div><div class="line">     * <span class="doctag">@param</span> child the child view associated with this Behavior</div><div class="line">     * <span class="doctag">@param</span> ev the MotionEvent describing the touch event being processed</div><div class="line">     * <span class="doctag">@return</span> true if this Behavior would like to intercept and take over the event stream.</div><div class="line">     *         The default always returns false.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onInterceptTouchEvent(CoordinatorLayout <span class="keyword">parent</span>, V child, MotionEvent ev) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Respond to CoordinatorLayout touch events after this Behavior has started</div><div class="line">     * &#123;<span class="doctag">@link</span> #onInterceptTouchEvent intercepting&#125; them.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Behaviors may intercept touch events in order to help the CoordinatorLayout</div><div class="line">     * manipulate its child views. For example, a Behavior may allow a user to drag a</div><div class="line">     * UI pane open or closed. This method should perform actual mutations of view</div><div class="line">     * layout state.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent the parent view currently receiving this touch event</div><div class="line">     * <span class="doctag">@param</span> child the child view associated with this Behavior</div><div class="line">     * <span class="doctag">@param</span> ev the MotionEvent describing the touch event being processed</div><div class="line">     * <span class="doctag">@return</span> true if this Behavior handled this touch event and would like to continue</div><div class="line">     *         receiving events in this stream. The default always returns false.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onTouchEvent(CoordinatorLayout <span class="keyword">parent</span>, V child, MotionEvent ev) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Supply a scrim color that will be painted behind the associated child view.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;A scrim may be used to indicate that the other elements beneath it are not currently</div><div class="line">     * interactive or actionable, drawing user focus and attention to the views above the scrim.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;The default implementation returns &#123;<span class="doctag">@link</span> Color#BLACK&#125;.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent the parent view of the given child</div><div class="line">     * <span class="doctag">@param</span> child the child view above the scrim</div><div class="line">     * <span class="doctag">@return</span> the desired scrim color in 0xAARRGGBB format. The default return value is</div><div class="line">     *         &#123;<span class="doctag">@link</span> Color#BLACK&#125;.</div><div class="line">     * <span class="doctag">@see</span> #getScrimOpacity(CoordinatorLayout, android.view.View)</div><div class="line">     */</div><div class="line">    @ColorInt</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> getScrimColor(CoordinatorLayout <span class="keyword">parent</span>, V child) &#123;</div><div class="line">        <span class="keyword">return</span> Color.BLACK;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Determine the current opacity of the scrim behind a given child view</div><div class="line">     *</div><div class="line">     * &lt;p&gt;A scrim may be used to indicate that the other elements beneath it are not currently</div><div class="line">     * interactive or actionable, drawing user focus and attention to the views above the scrim.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;The default implementation returns 0.0f.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent the parent view of the given child</div><div class="line">     * <span class="doctag">@param</span> child the child view above the scrim</div><div class="line">     * <span class="doctag">@return</span> the desired scrim opacity from 0.0f to 1.0f. The default return value is 0.0f.</div><div class="line">     */</div><div class="line">    @FloatRange(from = <span class="number">0</span>, to = <span class="number">1</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">float</span> getScrimOpacity(CoordinatorLayout <span class="keyword">parent</span>, V child) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0.</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> blocksInteractionBelow(CoordinatorLayout <span class="keyword">parent</span>, V child) &#123;</div><div class="line">        <span class="keyword">return</span> getScrimOpacity(<span class="keyword">parent</span>, child) &gt; <span class="number">0.</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 一定条件下返回true即可确立依赖关系。子类重写该方法，并实现自己依赖逻辑。</div><div class="line">     * 该方法会被Behavior的LayoutParamas的dependsOn方法调用</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> layoutDependsOn(CoordinatorLayout <span class="keyword">parent</span>, V child, View dependency) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    *当我们的dependency发生改变的时候，这个方法会调用，而我们在onDependentViewChanged方法里做出相应的改变，就能做出我们想要的交互效果了</div><div class="line">    *当我们改变了child的size或者position的时候我们需要返回true，差不多可以理解为 当我们的dependency发生了改变，同样的，child也需要发生改变，这个时候我们需要返回true。</div><div class="line">    * 它会被dispatchOnDependentViewChanged方法调用</div><div class="line">      */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onDependentViewChanged(CoordinatorLayout <span class="keyword">parent</span>, V child, View dependency) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onDependentViewRemoved(CoordinatorLayout <span class="keyword">parent</span>, V child, View dependency) &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when the parent CoordinatorLayout is about to measure the given child view.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;This method can be used to perform custom or modified measurement of a child view</div><div class="line">     * in place of the default child measurement behavior. The Behavior's implementation</div><div class="line">     * can delegate to the standard CoordinatorLayout measurement behavior by calling</div><div class="line">     * &#123;<span class="doctag">@link</span> CoordinatorLayout#onMeasureChild(android.view.View, int, int, int, int)</div><div class="line">     * parent.onMeasureChild&#125;.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent the parent CoordinatorLayout</div><div class="line">     * <span class="doctag">@param</span> child the child to measure</div><div class="line">     * <span class="doctag">@param</span> parentWidthMeasureSpec the width requirements for this view</div><div class="line">     * <span class="doctag">@param</span> widthUsed extra space that has been used up by the parent</div><div class="line">     *        horizontally (possibly by other children of the parent)</div><div class="line">     * <span class="doctag">@param</span> parentHeightMeasureSpec the height requirements for this view</div><div class="line">     * <span class="doctag">@param</span> heightUsed extra space that has been used up by the parent</div><div class="line">     *        vertically (possibly by other children of the parent)</div><div class="line">     * <span class="doctag">@return</span> true if the Behavior measured the child view, false if the CoordinatorLayout</div><div class="line">     *         should perform its default measurement</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onMeasureChild(CoordinatorLayout <span class="keyword">parent</span>, V child,</div><div class="line">            <span class="keyword">int</span> parentWidthMeasureSpec, <span class="keyword">int</span> widthUsed,</div><div class="line">            <span class="keyword">int</span> parentHeightMeasureSpec, <span class="keyword">int</span> heightUsed) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when the parent CoordinatorLayout is about the lay out the given child view.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;This method can be used to perform custom or modified layout of a child view</div><div class="line">     * in place of the default child layout behavior. The Behavior's implementation can</div><div class="line">     * delegate to the standard CoordinatorLayout measurement behavior by calling</div><div class="line">     * &#123;<span class="doctag">@link</span> CoordinatorLayout#onLayoutChild(android.view.View, int)</div><div class="line">     * parent.onLayoutChild&#125;.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;If a Behavior implements</div><div class="line">     * &#123;<span class="doctag">@link</span> #onDependentViewChanged(CoordinatorLayout, android.view.View, android.view.View)&#125;</div><div class="line">     * to change the position of a view in response to a dependent view changing, it</div><div class="line">     * should also implement &lt;code&gt;onLayoutChild&lt;/code&gt; in such a way that respects those</div><div class="line">     * dependent views. &lt;code&gt;onLayoutChild&lt;/code&gt; will always be called for a dependent view</div><div class="line">     * &lt;em&gt;after&lt;/em&gt; its dependency has been laid out.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent the parent CoordinatorLayout</div><div class="line">     * <span class="doctag">@param</span> child child view to lay out</div><div class="line">     * <span class="doctag">@param</span> layoutDirection the resolved layout direction for the CoordinatorLayout, such as</div><div class="line">     *                        &#123;<span class="doctag">@link</span> ViewCompat#LAYOUT_DIRECTION_LTR&#125; or</div><div class="line">     *                        &#123;<span class="doctag">@link</span> ViewCompat#LAYOUT_DIRECTION_RTL&#125;.</div><div class="line">     * <span class="doctag">@return</span> true if the Behavior performed layout of the child view, false to request</div><div class="line">     *         default layout behavior</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onLayoutChild(CoordinatorLayout <span class="keyword">parent</span>, V child, <span class="keyword">int</span> layoutDirection) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Utility methods for accessing child-specific, behavior-modifiable properties.</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a descendant of the CoordinatorLayout attempts to initiate a nested scroll.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with any direct child of the CoordinatorLayout may respond</div><div class="line">     * to this event and return true to indicate that the CoordinatorLayout should act as</div><div class="line">     * a nested scrolling parent for this scroll. Only Behaviors that return true from</div><div class="line">     * this method will receive subsequent nested scroll events.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> directTargetChild the child view of the CoordinatorLayout that either is or</div><div class="line">     *                          contains the target of the nested scroll operation</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout initiating the nested scroll</div><div class="line">     * <span class="doctag">@param</span> nestedScrollAxes the axes that this nested scroll applies to. See</div><div class="line">     *                         &#123;<span class="doctag">@link</span> ViewCompat#SCROLL_AXIS_HORIZONTAL&#125;,</div><div class="line">     *                         &#123;<span class="doctag">@link</span> ViewCompat#SCROLL_AXIS_VERTICAL&#125;</div><div class="line">     * <span class="doctag">@return</span> true if the Behavior wishes to accept this nested scroll</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onStartNestedScroll(View, View, int)</div><div class="line">     *联合滑动的方法监听</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onStartNestedScroll(CoordinatorLayout coordinatorLayout,</div><div class="line">            V child, View directTargetChild, View target, <span class="keyword">int</span> nestedScrollAxes) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a nested scroll has been accepted by the CoordinatorLayout.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with any direct child of the CoordinatorLayout may elect</div><div class="line">     * to accept the nested scroll as part of &#123;<span class="doctag">@link</span> #onStartNestedScroll&#125;. Each Behavior</div><div class="line">     * that returned true will receive subsequent nested scroll events for that nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> directTargetChild the child view of the CoordinatorLayout that either is or</div><div class="line">     *                          contains the target of the nested scroll operation</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout initiating the nested scroll</div><div class="line">     * <span class="doctag">@param</span> nestedScrollAxes the axes that this nested scroll applies to. See</div><div class="line">     *                         &#123;<span class="doctag">@link</span> ViewCompat#SCROLL_AXIS_HORIZONTAL&#125;,</div><div class="line">     *                         &#123;<span class="doctag">@link</span> ViewCompat#SCROLL_AXIS_VERTICAL&#125;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onNestedScrollAccepted(View, View, int)</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onNestedScrollAccepted(CoordinatorLayout coordinatorLayout, V child,</div><div class="line">            View directTargetChild, View target, <span class="keyword">int</span> nestedScrollAxes) &#123;</div><div class="line">        <span class="comment">// Do nothing</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a nested scroll has ended.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with any direct child of the CoordinatorLayout may elect</div><div class="line">     * to accept the nested scroll as part of &#123;<span class="doctag">@link</span> #onStartNestedScroll&#125;. Each Behavior</div><div class="line">     * that returned true will receive subsequent nested scroll events for that nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;&lt;code&gt;onStopNestedScroll&lt;/code&gt; marks the end of a single nested scroll event</div><div class="line">     * sequence. This is a good place to clean up any state related to the nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout that initiated</div><div class="line">     *               the nested scroll</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onStopNestedScroll(View)</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onStopNestedScroll(CoordinatorLayout coordinatorLayout, V child, View target) &#123;</div><div class="line">        <span class="comment">// Do nothing</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a nested scroll in progress has updated and the target has scrolled or</div><div class="line">     * attempted to scroll.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with the direct child of the CoordinatorLayout may elect</div><div class="line">     * to accept the nested scroll as part of &#123;<span class="doctag">@link</span> #onStartNestedScroll&#125;. Each Behavior</div><div class="line">     * that returned true will receive subsequent nested scroll events for that nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;&lt;code&gt;onNestedScroll&lt;/code&gt; is called each time the nested scroll is updated by the</div><div class="line">     * nested scrolling child, with both consumed and unconsumed components of the scroll</div><div class="line">     * supplied in pixels. &lt;em&gt;Each Behavior responding to the nested scroll will receive the</div><div class="line">     * same values.&lt;/em&gt;</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout performing the nested scroll</div><div class="line">     * <span class="doctag">@param</span> dxConsumed horizontal pixels consumed by the target's own scrolling operation</div><div class="line">     * <span class="doctag">@param</span> dyConsumed vertical pixels consumed by the target's own scrolling operation</div><div class="line">     * <span class="doctag">@param</span> dxUnconsumed horizontal pixels not consumed by the target's own scrolling</div><div class="line">     *                     operation, but requested by the user</div><div class="line">     * <span class="doctag">@param</span> dyUnconsumed vertical pixels not consumed by the target's own scrolling operation,</div><div class="line">     *                     but requested by the user</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onNestedScroll(View, int, int, int, int)</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onNestedScroll(CoordinatorLayout coordinatorLayout, V child, View target,</div><div class="line">            <span class="keyword">int</span> dxConsumed, <span class="keyword">int</span> dyConsumed, <span class="keyword">int</span> dxUnconsumed, <span class="keyword">int</span> dyUnconsumed) &#123;</div><div class="line">        <span class="comment">// Do nothing</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a nested scroll in progress is about to update, before the target has</div><div class="line">     * consumed any of the scrolled distance.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with the direct child of the CoordinatorLayout may elect</div><div class="line">     * to accept the nested scroll as part of &#123;<span class="doctag">@link</span> #onStartNestedScroll&#125;. Each Behavior</div><div class="line">     * that returned true will receive subsequent nested scroll events for that nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;&lt;code&gt;onNestedPreScroll&lt;/code&gt; is called each time the nested scroll is updated</div><div class="line">     * by the nested scrolling child, before the nested scrolling child has consumed the scroll</div><div class="line">     * distance itself. &lt;em&gt;Each Behavior responding to the nested scroll will receive the</div><div class="line">     * same values.&lt;/em&gt; The CoordinatorLayout will report as consumed the maximum number</div><div class="line">     * of pixels in either direction that any Behavior responding to the nested scroll reported</div><div class="line">     * as consumed.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout performing the nested scroll</div><div class="line">     * <span class="doctag">@param</span> dx the raw horizontal number of pixels that the user attempted to scroll</div><div class="line">     * <span class="doctag">@param</span> dy the raw vertical number of pixels that the user attempted to scroll</div><div class="line">     * <span class="doctag">@param</span> consumed out parameter. consumed[0] should be set to the distance of dx that</div><div class="line">     *                 was consumed, consumed[1] should be set to the distance of dy that</div><div class="line">     *                 was consumed</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onNestedPreScroll(View, int, int, int[])</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void onNestedPreScroll(CoordinatorLayout coordinatorLayout, V child, View target,</div><div class="line">            <span class="keyword">int</span> dx, <span class="keyword">int</span> dy, <span class="keyword">int</span>[] consumed) &#123;</div><div class="line">        <span class="comment">// Do nothing</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a nested scrolling child is starting a fling or an action that would</div><div class="line">     * be a fling.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with the direct child of the CoordinatorLayout may elect</div><div class="line">     * to accept the nested scroll as part of &#123;<span class="doctag">@link</span> #onStartNestedScroll&#125;. Each Behavior</div><div class="line">     * that returned true will receive subsequent nested scroll events for that nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;&lt;code&gt;onNestedFling&lt;/code&gt; is called when the current nested scrolling child view</div><div class="line">     * detects the proper conditions for a fling. It reports if the child itself consumed</div><div class="line">     * the fling. If it did not, the child is expected to show some sort of overscroll</div><div class="line">     * indication. This method should return true if it consumes the fling, so that a child</div><div class="line">     * that did not itself take an action in response can choose not to show an overfling</div><div class="line">     * indication.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout performing the nested scroll</div><div class="line">     * <span class="doctag">@param</span> velocityX horizontal velocity of the attempted fling</div><div class="line">     * <span class="doctag">@param</span> velocityY vertical velocity of the attempted fling</div><div class="line">     * <span class="doctag">@param</span> consumed true if the nested child view consumed the fling</div><div class="line">     * <span class="doctag">@return</span> true if the Behavior consumed the fling</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onNestedFling(View, float, float, boolean)</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onNestedFling(CoordinatorLayout coordinatorLayout, V child, View target,</div><div class="line">            <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY, <span class="keyword">boolean</span> consumed) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when a nested scrolling child is about to start a fling.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with the direct child of the CoordinatorLayout may elect</div><div class="line">     * to accept the nested scroll as part of &#123;<span class="doctag">@link</span> #onStartNestedScroll&#125;. Each Behavior</div><div class="line">     * that returned true will receive subsequent nested scroll events for that nested scroll.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;&lt;code&gt;onNestedPreFling&lt;/code&gt; is called when the current nested scrolling child view</div><div class="line">     * detects the proper conditions for a fling, but it has not acted on it yet. A</div><div class="line">     * Behavior can return true to indicate that it consumed the fling. If at least one</div><div class="line">     * Behavior returns true, the fling should not be acted upon by the child.&lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> target the descendant view of the CoordinatorLayout performing the nested scroll</div><div class="line">     * <span class="doctag">@param</span> velocityX horizontal velocity of the attempted fling</div><div class="line">     * <span class="doctag">@param</span> velocityY vertical velocity of the attempted fling</div><div class="line">     * <span class="doctag">@return</span> true if the Behavior consumed the fling</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> NestedScrollingParent#onNestedPreFling(View, float, float)</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> onNestedPreFling(CoordinatorLayout coordinatorLayout, V child, View target,</div><div class="line">            <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Called when the window insets have changed.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;Any Behavior associated with the direct child of the CoordinatorLayout may elect</div><div class="line">     * to handle the window inset change on behalf of it's associated view.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> coordinatorLayout the CoordinatorLayout parent of the view this Behavior is</div><div class="line">     *                          associated with</div><div class="line">     * <span class="doctag">@param</span> child the child view of the CoordinatorLayout this Behavior is associated with</div><div class="line">     * <span class="doctag">@param</span> insets the new window insets.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> The insets supplied, minus any insets that were consumed</div><div class="line">     */</div><div class="line">    @NonNull</div><div class="line">    <span class="keyword">public</span> WindowInsetsCompat onApplyWindowInsets(CoordinatorLayout coordinatorLayout,</div><div class="line">            V child, WindowInsetsCompat insets) &#123;</div><div class="line">        <span class="keyword">return</span> insets;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="为什么Beavior可以解决之前安卓事件传递缺陷？"><a href="#为什么Beavior可以解决之前安卓事件传递缺陷？" class="headerlink" title="为什么Beavior可以解决之前安卓事件传递缺陷？"></a>为什么Beavior可以解决之前安卓事件传递缺陷？</h3><p>普通版本的ViewGroup一直存在的事件传递缺陷，那继承了ViewGroup的新控件CoordinatorLayout怎么解决该问题的，主要还是把相关事物优先交给了Beavior处理。</p>
<p>View的绘制三大步骤：Measure，Layout，Draw。那么我们分别看下重写的父类方法<em>onMeasure</em>, <em>onLayout</em>, <em>onDraw</em>.及事件传递相关方法<em>onInterceptTouchEvent</em>， <em>onTouchEvent</em>.</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">       <span class="keyword">boolean</span> handled = <span class="keyword">false</span>;</div><div class="line">       <span class="keyword">boolean</span> cancelSuper = <span class="keyword">false</span>;</div><div class="line">       MotionEvent cancelEvent = <span class="keyword">null</span>;</div><div class="line">       <span class="keyword">final</span> <span class="keyword">int</span> action = MotionEventCompat.getActionMasked(ev);</div><div class="line">       <span class="comment">// mBehaviorTouchView不为null（代表之前有behavior处理了down事件） 或者 performIntercept返回true 那么事件就交给mBehaviorTouchView</span></div><div class="line">       <span class="keyword">if</span> (mBehaviorTouchView != <span class="keyword">null</span> || (cancelSuper = performIntercept(ev, TYPE_ON_TOUCH))) &#123;</div><div class="line">        <span class="comment">// Safe since performIntercept guarantees that</span></div><div class="line">        <span class="comment">// mBehaviorTouchView != null if it returns true</span></div><div class="line">        <span class="keyword">final</span> LayoutParams lp = (LayoutParams) mBehaviorTouchView.getLayoutParams();</div><div class="line">        <span class="keyword">final</span> Behavior b = lp.getBehavior();</div><div class="line">        <span class="keyword">if</span> (b != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="comment">// 交给 behavior去处理事件  </span></div><div class="line">            handled = b.onTouchEvent(<span class="keyword">this</span>, mBehaviorTouchView, ev);</div><div class="line">        &#125;</div><div class="line">     &#125;</div><div class="line">    <span class="comment">// Keep the super implementation correct</span></div><div class="line">    <span class="comment">// 省略调用默认实现 up&amp;cancel的时候重置状态</span></div><div class="line">    ......</div><div class="line">    <span class="keyword">return</span> handled;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以看到，其实这两个方法做的事情并不多，其实都交给performIntercept方法去做处理了！</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// type 标记是intercept还是touch</span></div><div class="line"> <span class="keyword">private</span> <span class="keyword">boolean</span> performIntercept(MotionEvent ev, <span class="keyword">final</span> <span class="keyword">int</span> type) &#123;</div><div class="line">  <span class="keyword">final</span> <span class="keyword">int</span> action = MotionEventCompat.getActionMasked(ev);</div><div class="line">  <span class="keyword">final</span> List&lt;View&gt; topmostChildList = mTempList1;</div><div class="line"> <span class="comment">//按Z轴排序 原因很简单 让最上面的View先处理事件  </span></div><div class="line">  getTopSortedChildren(topmostChildList);</div><div class="line"> <span class="comment">// Let topmost child views inspect first </span></div><div class="line">  <span class="keyword">final</span> <span class="keyword">int</span> childCount = topmostChildList.size();</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childCount; i++) &#123;</div><div class="line">     <span class="keyword">final</span> View child = topmostChildList.get(i);</div><div class="line">     <span class="keyword">final</span> LayoutParams lp = (LayoutParams) child.getLayoutParams();</div><div class="line">     <span class="keyword">final</span> Behavior b = lp.getBehavior();</div><div class="line">     <span class="comment">//当前事件已经被某个behavior拦截了（or newBlock），并且事件不为down，那么就发送一个 取消事件 给所有在拦截的behavior之后的behavior</span></div><div class="line">     <span class="keyword">if</span> ((intercepted || newBlock) &amp;&amp; action != MotionEvent.ACTION_DOWN) &#123;</div><div class="line">         <span class="comment">// Cancel all behaviors beneath the one that intercepted.</span></div><div class="line">         <span class="comment">// If the event is "down" then we don't have anything to cancel yet.</span></div><div class="line">         <span class="keyword">if</span> (b != <span class="literal">null</span>) &#123;</div><div class="line">             <span class="keyword">if</span> (cancelEvent == <span class="literal">null</span>) &#123;</div><div class="line">                 <span class="keyword">final</span> <span class="keyword">long</span> now = SystemClock.uptimeMillis();</div><div class="line">                 cancelEvent = MotionEvent.obtain(now, now,</div><div class="line">                         MotionEvent.ACTION_CANCEL, <span class="number">0.0</span>f, <span class="number">0.0</span>f, <span class="number">0</span>);</div><div class="line">             &#125;</div><div class="line">             <span class="keyword">switch</span> (type) &#123;</div><div class="line">                 <span class="keyword">case</span> <span class="string">TYPE_ON_INTERCEPT:</span></div><div class="line">                     b.onInterceptTouchEvent(<span class="keyword">this</span>, child, cancelEvent);</div><div class="line">                     <span class="keyword">break</span>;</div><div class="line">                 <span class="keyword">case</span> <span class="string">TYPE_ON_TOUCH:</span></div><div class="line">                     b.onTouchEvent(<span class="keyword">this</span>, child, cancelEvent);</div><div class="line">                     <span class="keyword">break</span>;</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">         <span class="keyword">continue</span>;</div><div class="line">     &#125;</div><div class="line">     <span class="comment">// 如果还没有被拦截，那么继续询问每个Behavior 是否要处理该事件</span></div><div class="line">     <span class="keyword">if</span> (!intercepted &amp;&amp; b != <span class="literal">null</span>) &#123;</div><div class="line">         <span class="keyword">switch</span> (type) &#123;</div><div class="line">             <span class="keyword">case</span> <span class="string">TYPE_ON_INTERCEPT:</span></div><div class="line">                 intercepted = b.onInterceptTouchEvent(<span class="keyword">this</span>, child, ev);</div><div class="line">                 <span class="keyword">break</span>;</div><div class="line">             <span class="keyword">case</span> <span class="string">TYPE_ON_TOUCH:</span></div><div class="line">                 intercepted = b.onTouchEvent(<span class="keyword">this</span>, child, ev);</div><div class="line">                 <span class="keyword">break</span>;</div><div class="line">         &#125;</div><div class="line">         <span class="comment">//如果有behavior处理了当前的事件，那么把它赋值给mBehaviorTouchView,它其实跟ViewGroup源码中的mFirstTouchTarget作用是一样的</span></div><div class="line">         <span class="keyword">if</span> (intercepted) &#123;</div><div class="line">             mBehaviorTouchView = child;</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line">     <span class="comment">// Don't keep going if we're not allowing interaction below this.</span></div><div class="line">     <span class="comment">// Setting newBlock will make sure we cancel the rest of the behaviors.</span></div><div class="line">     <span class="comment">// 是否拦截一切在它之后的交互 好暴力-0-</span></div><div class="line">     <span class="keyword">final</span> <span class="keyword">boolean</span> wasBlocking = lp.didBlockInteraction();</div><div class="line">     <span class="keyword">final</span> <span class="keyword">boolean</span> isBlocking = lp.isBlockingInteractionBelow(<span class="keyword">this</span>, child);</div><div class="line">     newBlock = isBlocking &amp;&amp; !wasBlocking;</div><div class="line">     <span class="keyword">if</span> (isBlocking &amp;&amp; !newBlock) &#123;</div><div class="line">         <span class="comment">// Stop here since we don't have anything more to cancel - we already did</span></div><div class="line">         <span class="comment">// when the behavior first started blocking things below this point.</span></div><div class="line">         <span class="keyword">break</span>;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"> topmostChildList.clear();</div><div class="line"> <span class="keyword">return</span> intercepted;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过分析源码, 事件传递过程中，Behavior起到了一个高层次的拦截能力，可以更近每个子view自定义的实现逻辑，来统筹处理相关事件。</p>
<h2 id="二、AppBarLayout"><a href="#二、AppBarLayout" class="headerlink" title="二、AppBarLayout"></a>二、AppBarLayout</h2></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://www.canking.win/2017/06/29/design-ui/" data-id="cjb1xmnto000c4e3k8tef4on0" class="article-share-link">分享</a><div class="tags"><a href="/tags/Material-Design/">Material Design</a></div><div class="post-nav"><a href="/2017/06/11/plugin-hook/" class="pre">知识总结之 插件化学习 Hook系统方法分析</a><a href="/2017/07/03/charles-map/" class="next">知识总结之 Charles抓包工具使用总结</a></div><div class="post-donate"><div id="donate_board" class="donate_bar center"><a id="btn_donate" href="javascript:;" title="打赏" class="btn_donate"></a><span class="donate_txt"><br>		   Enjoy it ? Donate me :  免费分享，共同成长</span><br></div><div id="donate_guide" class="donate_bar center hidden"><a id="donate_weixin" href="http://www.canking.win/images/weixin.jpg" rel="article0" class="fancybox"><img src="http://www.canking.win/images/weixin.jpg" fuck="微信打赏"></a><a id="donate_zhifubao" href="http://www.canking.win/images/zhifubao.jpg" rel="article0" class="fancybox"><img src="http://www.canking.win/images/zhifubao.jpg" fuck="支付宝打赏"></a></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
$('#donate_board').addClass('hidden');
$('#donate_guide').removeClass('hidden');
}</script></div><div id="uyan_frame"></div><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2136494"></script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://www.canking.win"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/design-patterns/">design patterns</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gradle/">gradle</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Charles/" style="font-size: 15px;">Charles</a> <a href="/tags/smart-update/" style="font-size: 15px;">smart update</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/JobQueue/" style="font-size: 15px;">JobQueue</a> <a href="/tags/float-permission/" style="font-size: 15px;">float permission</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/theme/" style="font-size: 15px;">theme</a> <a href="/tags/Plugin/" style="font-size: 15px;">Plugin</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/Material-Design/" style="font-size: 15px;">Material Design</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/ffmpeg/" style="font-size: 15px;">ffmpeg</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/source-code/" style="font-size: 15px;">source code</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/12/09/mvvm/">Lifecycle+Retrofit+Room完美结合 领略架构之美</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/19/gradle-android-res/">Gradle插件开发 APK瘦身资源自定义7z压缩</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/minipay/">免sdk实现微信／支付宝转账打赏功能</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/03/charles-map/">知识总结之 Charles抓包工具使用总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/29/design-ui/">知识总结之 Material Design库常用控件总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/11/plugin-hook/">知识总结之 插件化学习 Hook系统方法分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/01/plugin-activity-loader/">知识总结之 插件化 占坑类Activity实现方式分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/01/binder/">知识总结 插件化学习 Binder机制原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/20/plugin-activity/">知识总结 插件化学习 Activity加载分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/13/symbolic-link/">Linux系统中硬链接与软链接</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.canking.win/fitness" title="健美计步器" target="_blank">健美计步器</a><ul></ul><a href="http://www.canking.win/chargehelper" title="充电助手" target="_blank">充电助手</a><ul></ul><a href="http://sudoku.strikingly.com/" title="爱我数独" target="_blank">爱我数独</a><ul></ul><a href="http://stopwatch.strikingly.com/" title="精确秒表" target="_blank">精确秒表</a><ul></ul><a href="http://www.wandoujia.com/apps/net.canking.gameby" title="色 变" target="_blank">色 变</a><ul></ul><a href="http://canking.strikingly.com/" title="自我简介" target="_blank">自我简介</a><ul></ul><a href="http://cankingapp.github.io/fitness/h5game/index.html" title="H5 Game" target="_blank">H5 Game</a></div><iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&;fansRow=2&amp;ptype=1&amp;speed=0&amp;skin=1&amp;isTitle=1&amp;noborder=0&isWeibo=1&isFans=1&uid=1894127781&verifier=b6b87527&amp;dpc=1"></iframe></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">常兴 E 站.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> changxing</a> by<a rel="nofollow" target="_blank" href="https://github.com/CankingApp/"> Github.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>