<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="做酷的东西, 成为伟大的工程师，写匪夷所思的代码，然后和每个人成为朋友．"><title>知识总结之 插件化基础ClassLoader | 常兴 E 站</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">知识总结之 插件化基础ClassLoader</h1><a id="logo" href="/.">常兴 E 站</a><p class="description">Action Speak Louder Than Words.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/sitemap.xml"><i class="fa fa-rss"> sitemap</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">知识总结之 插件化基础ClassLoader</h1><div class="post-meta">May 6, 2017<span> | </span><span class="category"><a href="/categories/android/">android</a></span></div><a data-thread-key="2017/05/06/classloader/" href="/2017/05/06/classloader/#comments" class="ds-thread-count"></a><div class="post-content"><p>安卓插件化技术已经作为一个优秀的合格研发必备要求，学习和掌握现有不同种类动态加载方案 是提升个人技术深度有效途径。</p>
<p><img src="http://wx4.sinaimg.cn/mw690/70e618a5ly1fe68nauu9wj20ku0fmgnx.jpg" alt="傍晚的月色"></p>
<a id="more"></a>
<h1 id="插件化基础-ClassLoader"><a href="#插件化基础-ClassLoader" class="headerlink" title="插件化基础 ClassLoader"></a>插件化基础 ClassLoader</h1><h2 id="ClassLoader是什么？"><a href="#ClassLoader是什么？" class="headerlink" title="ClassLoader是什么？"></a>ClassLoader是什么？</h2><p><strong>ClassLoader</strong> 是将java编译后的字节码加载到虚拟机内存中的用到工具类。</p>
<p>Android平台虚拟机Dalvik/ART可以运行的字节码为.dex文件，Java平台JVM虚拟机可以被加载的字节码为.class文件。针对Android平台，若我们用ClassLoader加载指定地方的.dex，并且可以扩展ClassLoader实现定制加载器，就可以实现动态加载代码的目的。</p>
<p>dex文件也是由jar转化而来，android提供了转化命令：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dx --dex --output=target<span class="selector-class">.dex</span> origin<span class="selector-class">.jar</span> <span class="comment">// target.dex就是我们要的了</span></div></pre></td></tr></table></figure>
<h2 id="ClassLoader实例"><a href="#ClassLoader实例" class="headerlink" title="ClassLoader实例"></a>ClassLoader实例</h2><h3 id="Java虚拟机中类加载器："><a href="#Java虚拟机中类加载器：" class="headerlink" title="Java虚拟机中类加载器："></a>Java虚拟机中类加载器：</h3><p>系统默认三个主要的类加载器，每个类负责加载特定位置的类：<br>BootStrap,ExtClassLoader,AppClassLoader</p>
<ul>
<li>BootStrap 引导类加载器，用来加载java核心库（jre/lib/rt.jar），并非继承ClassLoader，C代码实现。</li>
<li>ExtClassLoader 扩展类加载器，用来加载java扩展库中的类（jre／lib／ext／*.jar）。</li>
<li>AppClassLoader 系统类加载器，根据类路径（ClassPath）来加载java类，java应用层类都是该类加载。</li>
</ul>
<p>用IntelliJ 创建java虚拟机代码</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> Run &#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String args[])&#123;</div><div class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</div><div class="line">        ClassLoader loader = Run.<span class="keyword">class</span>. getClassLoader();</div><div class="line">        <span class="keyword">while</span> (loader != <span class="keyword">null</span>)&#123;</div><div class="line">            stringBuilder.<span class="keyword">append</span>(loader.toString());</div><div class="line">            stringBuilder.<span class="keyword">append</span>(<span class="string">"\n##"</span>);</div><div class="line">            loader = loader.getParent();</div><div class="line">        &#125;</div><div class="line">        System.out.<span class="keyword">println</span>(<span class="string">"ClassLoader:"</span>+stringBuilder);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印信息中，可以看到加载器类的层级关系。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#<span class="selector-id">#ClassLoader</span>:sun<span class="selector-class">.misc</span><span class="selector-class">.Launcher</span><span class="variable">$AppClassLoader</span>@<span class="number">18</span>b4aac2</div><div class="line">#<span class="selector-id">#sun</span><span class="selector-class">.misc</span><span class="selector-class">.Launcher</span><span class="variable">$ExtClassLoader</span>@<span class="number">511</span>d50c0</div><div class="line"></div><div class="line">Process finished with exit <span class="selector-tag">code</span> <span class="number">0</span></div></pre></td></tr></table></figure>
<h3 id="安卓虚拟机Dalvik-ART类加载器"><a href="#安卓虚拟机Dalvik-ART类加载器" class="headerlink" title="安卓虚拟机Dalvik/ART类加载器"></a>安卓虚拟机Dalvik/ART类加载器</h3><p><img src="classloaderuml.png" alt="Android中的类加载器"></p>
<p>安卓平台虚拟机的类加载器实例和java不同，但都是继承自ClassLoader的。</p>
<ul>
<li><p>BootClassLoader<br>和java虚拟机中不同的是BootClassLoader是ClassLoader内部类,由java代码实现而不是c++实现,是Android平台上所有ClassLoader的最终parent,这个内部类是包内可见,所以我们没法使用。</p>
</li>
<li><p>URLClassLoader<br>只能用于加载jar文件，但是由于 dalvik 不能直接识别jar，所以在 Android 中无法使用这个加载器。</p>
</li>
<li><p>BaseDexClassLoader<br>PathClassLoader和DexClassLoader都继承自BaseDexClassLoader,其中的主要逻辑都是在BaseDexClassLoader完成的。这些源码在java/dalvik/system中。</p>
</li>
<li><p>DexClassLoader<br>DexClassLoader支持加载APK、DEX和JAR，也可以从SD卡进行加载。动态加载主要用到了该类特性，来动态加载不同类型压缩包里的或这直接dex文件代码。</p>
</li>
<li><p>PathClassLoader</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">PathClassLoader</span> <span class="keyword">extends</span> <span class="title">BaseDexClassLoader</span> </span>&#123;</div><div class="line">    public <span class="type">PathClassLoader</span>(<span class="type">String</span> dexPath, <span class="type">ClassLoader</span> parent) &#123;</div><div class="line">        <span class="keyword">super</span>(dexPath, <span class="literal">null</span>, <span class="literal">null</span>, parent);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public <span class="type">PathClassLoader</span>(<span class="type">String</span> dexPath, <span class="type">String</span> libraryPath,</div><div class="line">            <span class="type">ClassLoader</span> parent) &#123;</div><div class="line">        <span class="keyword">super</span>(dexPath, <span class="literal">null</span>, libraryPath, parent);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">     <span class="keyword">private</span> static <span class="type">DexFile</span> loadDexFile(<span class="type">File</span> file, <span class="type">File</span> optimizedDirectory)</div><div class="line">            <span class="keyword">throws</span> <span class="type">IOException</span> &#123;</div><div class="line">        <span class="keyword">if</span> (optimizedDirectory == <span class="literal">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">DexFile</span>(file);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="type">String</span> optimizedPath = optimizedPathFor(file, optimizedDirectory);</div><div class="line">            <span class="keyword">return</span> <span class="type">DexFile</span>.loadDex(file.getPath(), optimizedPath, <span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>由于构造参数optimizedDirectory指定为null，会直接使用dex文件原有的路径来创建DexFile对象。也就是说在dalvik虚假机上PathClassLoader无法加载外部的动态代码。</p>
<h2 id="类加载过程分析"><a href="#类加载过程分析" class="headerlink" title="类加载过程分析"></a>类加载过程分析</h2><p>JVM中ClassLoader通过defineClass方法加载jar里面的Class，而Android平台中这个方法被弃用了。取而代之的是loadClass方法。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Deprecated</span></div><div class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Class&lt;?&gt; defineClass(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</div><div class="line">    <span class="keyword">throws</span> ClassFormatError&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"can't load this type of class file"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>分析loadClass</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"> protected <span class="class"><span class="keyword">Class</span>&lt;?&gt; <span class="title">loadClass</span>(<span class="title">String</span> <span class="title">name</span>, <span class="title">boolean</span> <span class="title">resolve</span>)</span></div><div class="line">    throws ClassNotFoundException &#123;</div><div class="line">        // First, check <span class="keyword">if</span> the <span class="class"><span class="keyword">class</span> <span class="title">has</span> <span class="title">already</span> <span class="title">been</span> <span class="title">loaded</span></span></div><div class="line">        <span class="class"><span class="keyword">Class</span> <span class="title">c</span> = <span class="title">findLoadedClass</span>(<span class="title">name</span>);</span></div><div class="line">        <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</div><div class="line">            long t0 = System.nanoTime();</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</div><div class="line">                    c = parent.loadClass(name, <span class="literal">false</span>);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    c = findBootstrapClassOrNull(name);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">                // ClassNotFoundException thrown <span class="keyword">if</span> <span class="class"><span class="keyword">class</span> <span class="title">not</span> <span class="title">found</span></span></div><div class="line">                // from the non-<span class="literal">null</span> parent <span class="class"><span class="keyword">class</span> <span class="title">loader</span></span></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</div><div class="line">                // <span class="keyword">If</span> still <span class="keyword">not</span> found, <span class="keyword">then</span> invoke findClass in order</div><div class="line">                // <span class="keyword">to</span> find the <span class="class"><span class="keyword">class</span>.</span></div><div class="line">                long t1 = System.nanoTime();</div><div class="line">                c = findClass(name);</div><div class="line"></div><div class="line">                // this is the defining <span class="class"><span class="keyword">class</span> <span class="title">loader</span>; <span class="title">record</span> <span class="title">the</span> <span class="title">stats</span></span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> c;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>loadClass代码分析可以看出，加载前会看缓存中是否已经加载，没有加载则委托为parent，如果parent没有加载到，这child加载器开始findClass加载。这种加载方式被称为<strong>双亲代理模型加载</strong>。</p>
<p>特点：如果一个类被位于树根的ClassLoader加载过，那么在以后整个系统的生命周期内，这个类永远不会被重新加载。共享功能，一些Framework层级的类一旦被顶层的ClassLoader加载过就缓存在内存里面，以后任何地方用到都不需要重新加载。</p>
<p>除此之外还有隔离功能，不同继承路线上的ClassLoader加载的类肯定不是同一个类，这样的限制避免了用户自己的代码冒充核心类库的类访问核心类库包可见成员的情况。</p>
<p><img src="classloaderlayer.png" alt="android加载器层级关系"></p>
<p>层级关系中父类没有加载到时，子类开始findClass</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">    protected <span class="class"><span class="keyword">Class</span>&lt;?&gt; <span class="title">findClass</span>(<span class="title">String</span> <span class="title">name</span>) <span class="title">throws</span> <span class="title">ClassNotFoundException</span> &#123;</span></div><div class="line">        <span class="class"><span class="keyword">Class</span> <span class="title">clazz</span> = <span class="title">pathList</span>.<span class="title">findClass</span>(<span class="title">name</span>);</span></div><div class="line">        <span class="keyword">if</span> (clazz == <span class="literal">null</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ClassNotFoundException(name);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> clazz;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">Class</span> <span class="title">findClass</span>(<span class="title">String</span> <span class="title">name</span>) &#123;</span></div><div class="line">        <span class="keyword">for</span> (Element element : dexElements) &#123;</div><div class="line">            DexFile dex = element.dexFile;</div><div class="line">            <span class="keyword">if</span> (dex != <span class="literal">null</span>) &#123;</div><div class="line">                <span class="class"><span class="keyword">Class</span> <span class="title">clazz</span> = <span class="title">dex</span>.<span class="title">loadClassBinaryName</span>(<span class="title">name</span>, <span class="title">definingContext</span>);</span></div><div class="line">                <span class="keyword">if</span> (clazz != <span class="literal">null</span>) &#123;</div><div class="line">                    <span class="keyword">return</span> clazz;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">Class</span> <span class="title">loadClassBinaryName</span>(<span class="title">String</span> <span class="title">name</span>, <span class="title">ClassLoader</span> <span class="title">loader</span>) &#123;</span></div><div class="line">        <span class="keyword">return</span> defineClass(name, loader, mCookie);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> native static <span class="class"><span class="keyword">Class</span> <span class="title">defineClass</span>(<span class="title">String</span> <span class="title">name</span>, <span class="title">ClassLoader</span> <span class="title">loader</span>, <span class="title">int</span> <span class="title">cookie</span>);</span></div></pre></td></tr></table></figure>
<p>可以看出，BaseDexClassLoader中有个pathList对象，pathList中包含一个DexFile的数组dexElements,热修复原理也是修改该数组加载顺序来实现，dexPath传入的原始dex(.apk,.zip,.jar等)文件在optimizedDirectory文件夹中生成相应的优化后的odex文件，dexElements数组就是这些odex文件的集合，如果不分包一般这个数组只有一个Element元素，也就只有一个DexFile文件，而对于类加载呢，就是遍历这个集合，通过DexFile去寻找。最终调用native方法的defineClass。</p>
<h2 id="扩展ClassLoader实现定制化"><a href="#扩展ClassLoader实现定制化" class="headerlink" title="扩展ClassLoader实现定制化"></a>扩展ClassLoader实现定制化</h2><p>可以重载loadClass方法并改写类的加载逻辑，我们可以通过重写loadClass方法避开双亲代理的框架，这样一来就可以在重新加载已经加载过的类，也可以在加载类的时候注入一些代码。</p>
<p>安卓平台特有组件（activity，service等）的加载是否可以直接加载呢？答案肯定是否的，这些组件都是需要在清单文件中注册，然后才会被系统反射加载，并基于回调给予组件生命周期。</p>
<p>那我们想要加载一个安卓特有组件时，需要解决生命周期管理问题，才能正确的被系统调起来。</p>
<p>——————<br>欢迎转载，请标明出处：常兴E站 <a href="http://www.canking.win" target="_blank" rel="external">www.canking.win</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://cankingapp.github.io/2017/05/06/classloader/" data-id="cj2h94qa6000axs3kxm473nme" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Plugin/">Plugin</a></div><div class="post-nav"><a href="/2017/05/03/factory-design-pattern/" class="pre">知识总结之 工厂模式</a><a href="/2017/05/12/reflect-proxy/" class="next">知识总结之 插件化基础 java反射与代理</a></div><div class="post-donate"><div id="donate_board" class="donate_bar center"><a id="btn_donate" href="javascript:;" title="打赏" class="btn_donate"></a><span class="donate_txt"><br>		   Enjoy it ? Donate me :  免费分享，共同成长</span><br></div><div id="donate_guide" class="donate_bar center hidden"><a id="donate_weixin" href="{{ url_for(theme.images) }}/weixin.jpg" rel="article0" class="fancybox"><img src="{{ url_for(theme.images) }}/weixin.jpg" fuck="微信打赏"></a><a id="donate_zhifubao" href="{{ url_for(theme.images) }}/zhifubao.jpg" rel="article0" class="fancybox"><img src="{{ url_for(theme.images) }}/zhifubao.jpg" fuck="支付宝打赏"></a></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
$('#donate_board').addClass('hidden');
$('#donate_guide').removeClass('hidden');
}</script></div><div data-thread-key="2017/05/06/classloader/" data-title="知识总结之 插件化基础ClassLoader" data-url="http://cankingapp.github.io/2017/05/06/classloader/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/05/06/classloader/" data-title="知识总结之 插件化基础ClassLoader" data-url="http://cankingapp.github.io/2017/05/06/classloader/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://cankingapp.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/design-patterns/">design patterns</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/smart-update/" style="font-size: 15px;">smart update</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/JobQueue/" style="font-size: 15px;">JobQueue</a> <a href="/tags/float-permission/" style="font-size: 15px;">float permission</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/theme/" style="font-size: 15px;">theme</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/Plugin/" style="font-size: 15px;">Plugin</a> <a href="/tags/ffmpeg/" style="font-size: 15px;">ffmpeg</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/05/13/symbolic-link/">Linux系统中硬链接与软链接</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/12/reflect-proxy/">知识总结之 插件化基础 java反射与代理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/06/classloader/">知识总结之 插件化基础ClassLoader</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/factory-design-pattern/">知识总结之 工厂模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/JobQueue/">知识总结之 JobQueue 源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/27/AsyncTask/">知识总结之 AsyncTask 源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/08/git-log/">git log命令展示过滤技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/02/access-float/">辅助功能 之 小米手机悬浮窗权限</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/08/npm-update-errer/">Node 升级工具n 大坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/30/android-theme/">Android Theme-安卓样式换肤实践方案</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://cankingapp.github.io/fitness/" title="健美计步器" target="_blank">健美计步器</a><ul></ul><a href="http://zhushou.360.cn/detail/index/soft_id/260762" title="充电助手" target="_blank">充电助手</a><ul></ul><a href="http://sudoku.strikingly.com/" title="爱我数独" target="_blank">爱我数独</a><ul></ul><a href="http://stopwatch.strikingly.com/" title="精确秒表" target="_blank">精确秒表</a><ul></ul><a href="http://www.wandoujia.com/apps/net.canking.gameby" title="色 变" target="_blank">色 变</a><ul></ul><a href="http://canking.strikingly.com/" title="自我简介" target="_blank">自我简介</a><ul></ul><a href="http://cankingapp.github.io/fitness/h5game/index.html" title="H5 Game" target="_blank">H5 Game</a></div><iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&;fansRow=2&amp;ptype=1&amp;speed=0&amp;skin=1&amp;isTitle=1&amp;noborder=0&isWeibo=1&isFans=1&uid=1894127781&verifier=b6b87527&amp;dpc=1"></iframe></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">常兴 E 站.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> changxing</a> by<a rel="nofollow" target="_blank" href="https://github.com/CankingApp/"> Github.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'cankingapp'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260878992'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1260878992%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>